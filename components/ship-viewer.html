<!-- components/ship-viewer.html -->
<div class="viewer-3d">
    
    <!-- Ship Name Header -->
    <div class="p-4 border-b border-gray-700">
        <div class="flex items-center justify-between">
            <div>
                <h2 id="ship-name" class="text-2xl font-bold text-blue-300">Loading...</h2>
                <p id="ship-subtitle" class="text-sm text-gray-400">-</p>
            </div>
            <div class="text-right">
                <div class="text-xs text-gray-400">Level Required</div>
                <div id="ship-level" class="text-lg font-bold text-yellow-400">-</div>
            </div>
        </div>
    </div>
    
    <!-- 3D Model Display -->
    <div id="ship-model" class="ship-model h-96 flex items-center justify-center relative">
        <div class="text-center">
            <i data-lucide="rocket" class="w-32 h-32 text-blue-400 opacity-70 mx-auto mb-4"></i>
            <p class="text-sm text-gray-500">3D Model Viewer</p>
            <p class="text-xs text-gray-600 mt-2">(Click & drag to rotate)</p>
        </div>
        
        <!-- Rotation indicator -->
        <div class="absolute bottom-4 right-4 text-xs text-gray-500">
            <i data-lucide="rotate-3d" class="w-4 h-4 inline mr-1"></i>
            <span id="rotation-status">Auto-rotate: OFF</span>
        </div>
    </div>
    
    <!-- Quick Stats -->
    <div class="p-4 border-t border-gray-700 space-y-3">
        <div>
            <div class="flex justify-between text-xs mb-1">
                <span class="text-gray-400">Hull</span>
                <span id="stat-hull" class="text-green-400 font-semibold">-</span>
            </div>
            <div class="stat-bar">
                <div id="stat-hull-bar" class="stat-fill" style="width: 0%;"></div>
            </div>
        </div>
        
        <div>
            <div class="flex justify-between text-xs mb-1">
                <span class="text-gray-400">Speed</span>
                <span id="stat-speed" class="text-blue-400 font-semibold">-</span>
            </div>
            <div class="stat-bar">
                <div id="stat-speed-bar" class="stat-fill bg-gradient-to-r from-blue-500 to-cyan-500" style="width: 0%;"></div>
            </div>
        </div>
        
        <div>
            <div class="flex justify-between text-xs mb-1">
                <span class="text-gray-400">Cargo</span>
                <span id="stat-cargo" class="text-yellow-400 font-semibold">-</span>
            </div>
            <div class="stat-bar">
                <div id="stat-cargo-bar" class="stat-fill bg-gradient-to-r from-yellow-500 to-orange-500" style="width: 0%;"></div>
            </div>
        </div>
        
        <div>
            <div class="flex justify-between text-xs mb-1">
                <span class="text-gray-400">Energy</span>
                <span id="stat-energy" class="text-purple-400 font-semibold">-</span>
            </div>
            <div class="stat-bar">
                <div id="stat-energy-bar" class="stat-fill bg-gradient-to-r from-purple-500 to-pink-500" style="width: 0%;"></div>
            </div>
        </div>
    </div>
    
    <!-- Controls -->
    <div class="p-4 border-t border-gray-700">
        <div class="flex gap-2">
            <button id="btn-auto-rotate" onclick="toggleAutoRotate()" class="flex-1 game-nav-item text-center text-xs">
                <i data-lucide="rotate-cw" class="w-4 h-4 mx-auto mb-1"></i>
                Auto-Rotate
            </button>
            <button onclick="toggleFullscreen()" class="flex-1 game-nav-item text-center text-xs">
                <i data-lucide="maximize-2" class="w-4 h-4 mx-auto mb-1"></i>
                Fullscreen
            </button>
        </div>
    </div>
    
</div>

<script>
    let autoRotateEnabled = false;
    
    // Load ship data into viewer
    function loadShipIntoViewer(shipData) {
        // Update header
        document.getElementById('ship-name').textContent = shipData.name;
        document.getElementById('ship-subtitle').textContent = `${shipData.faction} ${shipData.class} â€¢ Tier ${shipData.tier}`;
        document.getElementById('ship-level').textContent = shipData.level || '-';
        
        // Update stats
        document.getElementById('stat-hull').textContent = shipData.hull.toLocaleString();
        document.getElementById('stat-speed').textContent = shipData.speed;
        document.getElementById('stat-cargo').textContent = shipData.cargo;
        document.getElementById('stat-energy').textContent = shipData.energy;
        
        // Update stat bars (animate them)
        setTimeout(() => {
            document.getElementById('stat-hull-bar').style.width = `${(shipData.hull / 10000) * 100}%`;
            document.getElementById('stat-speed-bar').style.width = `${shipData.speed}%`;
            document.getElementById('stat-cargo-bar').style.width = `${(shipData.cargo / 600) * 100}%`;
            document.getElementById('stat-energy-bar').style.width = `${(shipData.energy / 500) * 100}%`;
        }, 100);
    }
    
    // Toggle auto-rotate
    function toggleAutoRotate() {
        autoRotateEnabled = !autoRotateEnabled;
        const status = document.getElementById('rotation-status');
        const btn = document.getElementById('btn-auto-rotate');
        
        if (autoRotateEnabled) {
            status.textContent = 'Auto-rotate: ON';
            btn.classList.add('active');
            // TODO: Implement actual 3D rotation
        } else {
            status.textContent = 'Auto-rotate: OFF';
            btn.classList.remove('active');
        }
    }
    
    // Toggle fullscreen
    function toggleFullscreen() {
        const viewer = document.querySelector('.viewer-3d');
        if (!document.fullscreenElement) {
            viewer.requestFullscreen().catch(err => {
                console.error('Fullscreen error:', err);
            });
        } else {
            document.exitFullscreen();
        }
    }
</script>